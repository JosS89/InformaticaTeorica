%{
#include <stdio.h>
#include <string.h>
int ints = 0, floats = 0, ifs = 0, mains = 0, elses = 0, scanfs = 0, printfs = 0, lineasCodigo = 0, lineasComentario = 0;

%}

letra [a-zA-Z]
natural [0-9]
noDigitos [_a-zA-Z]
puntuacion [,;)}]
input [^\r\n]
operador [+*=&]
operador2 ("&&")
blanco (" ")
eol (\n|\r|\r\n)
numero ({natural}+("."{natural}+)?)
ident ({letra}({letra}|{natural})*)
coment ("//"{input}*{eol}?)

%%

"printf" {printfs++;
}
"int"  {ints++;
}
"float" {floats++;
}
"if" {ifs++;
}
"else" {elses++;
}
"main" {mains++;
}
"scanf" {scanfs++;
}

{ident}
{
	lineasCodigo++;
}

{coment} {lineasComentario++;
		}


. | \n ;

%%

int main()
{	
	char nombre[100];
	//printf("Fichero de entrada: ");
	//scanf("%s", nombre);
	yyin = fopen ("Entrada.c","r");
	//yyout = fopen("Identificadores.txt","w");
	if (yyin != NULL){
		yylex();
	}
	printf("\nints: %d floats: %d if: %d, main: %d, else: %d, scanf: %d, printf: %d\n",ints, floats, ifs, mains, elses, scanfs, printfs);
  	printf("Numero lineas comentario: %d\n",lineasComentario);
  	printf("Idents: %d\n", lineasCodigo);

}
int yywrap(){
return 1;
}
